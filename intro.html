

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Read Me First &mdash; Red Hat PSAP CI-Artifacts toolbox git-/ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing" href="contrib.html" />
    <link rel="prev" title="Red Hat PSAP CI-Artifacts toolbox" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Red Hat PSAP CI-Artifacts toolbox
          

          
          </a>

          
            
            
              <div class="version">
                25, Apr 2022
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Read Me First</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prow-ci">Prow CI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ci-dashboard">CI Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="#psap-operators-toolbox">PSAP Operators Toolbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#available-toolbox-commands">Available Toolbox Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cluster">cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="#entitlement">entitlement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gpu-operator">gpu_operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#local-ci">local_ci</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nfd">nfd</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nfd-operator">nfd_operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#repo">repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sro">sro</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">ChangeLog</a></li>
</ul>
<p class="caption"><span class="caption-text">PSAP Operator CI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ci/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci/files.html">Special Files</a></li>
</ul>
<p class="caption"><span class="caption-text">PSAP Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="toolbox/cluster.html">Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/entitlement.html">Entitlement</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/gpu_operator.html">GPU Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/nfd.html">Node Feature Discover Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/nto.html">Node Tuning Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/sro.html">Special Resource Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/local-ci.html">Local CI Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbox/repo.html">Repository Maintenance</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Red Hat PSAP CI-Artifacts toolbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Read Me First</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="read-me-first">
<h1>Read Me First<a class="headerlink" href="#read-me-first" title="Permalink to this headline">¶</a></h1>
<p>This repository contains <a class="reference external" href="https://www.ansible.com/">Ansible</a> roles and
playbooks for <a class="reference external" href="https://www.openshift.com/">OpenShift</a> for automating
the interactions with the OpenShift operators under the responsibility
Red Hat PSAP team.</p>
<blockquote>
<div><ul class="simple">
<li><p>Performance &amp; Latency Sensitive Application Platform</p></li>
</ul>
</div></blockquote>
<p>To date, this includes:</p>
<ul class="simple">
<li><p>NVIDIA GPU Operator (most of the repository relates to the
deployment, testing and interactions with this operator)</p></li>
<li><p>the Special Resource Operator (deployment and testing currently under
development)</p></li>
<li><p>the Node Feature Discovery</p></li>
<li><p>the Node Tuning Operator</p></li>
</ul>
<p>The OpenShift version we are supporting is 4.N+1, 4.N, 4.N-1 and 4.N-2, where
4.N is the current latest version released. So as of July 2021, we
need to support 4.9 (master), 4.8 (GA), 4.7 and 4.6.</p>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference external" href="https://openshift-psap.github.io/ci-artifacts/index.html">documentation pages</a>.</p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Requirements:</p>
<ul class="simple">
<li><p>See requirements.txt for reference</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip3 install -r requirements.txt
dnf install jq
</pre></div>
</div>
<ul class="simple">
<li><p>OpenShift Client (<code class="docutils literal notranslate"><span class="pre">oc</span></code>)</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>wget --quiet https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/latest/openshift-client-linux.tar.gz
tar xf openshift-client-linux.tar.gz oc
</pre></div>
</div>
<ul class="simple">
<li><p>An OpenShift cluster accessible with <code class="docutils literal notranslate"><span class="pre">$KUBECONFIG</span></code> properly set</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>oc version <span class="c1"># fails if the cluster is not reachable</span>
</pre></div>
</div>
</div>
<div class="section" id="prow-ci">
<h2>Prow CI<a class="headerlink" href="#prow-ci" title="Permalink to this headline">¶</a></h2>
<p>The original purpose of this repository was to perform nightly testing
of the OpenShift Operators under responsibility.</p>
<p>This CI testing is performed by OpenShift PROW instance. Is is
controlled by the configuration files located in these directories:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/openshift/release/tree/master/ci-operator/config/openshift-psap/ci-artifacts">https://github.com/openshift/release/tree/master/ci-operator/config/openshift-psap/ci-artifacts</a></p></li>
<li><p><a class="reference external" href="https://github.com/openshift/release/tree/master/ci-operator/jobs/openshift-psap/ci-artifacts">https://github.com/openshift/release/tree/master/ci-operator/jobs/openshift-psap/ci-artifacts</a></p></li>
</ul>
<p>The main configuration is written in the <code class="docutils literal notranslate"><span class="pre">config</span></code> directory, and
<code class="docutils literal notranslate"><span class="pre">jobs</span></code> are then generated with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ci-operator-config</span>
<span class="pre">jobs</span></code>. Secondary configuration options can then be modified in the
<code class="docutils literal notranslate"><span class="pre">jobs</span></code> directory.</p>
<p>The Prow CI jobs run in an OpenShift Pod. The <a class="reference external" href="build/Dockerfile">ContainerFile</a> is used to build their base-image, and the
<code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">prow</span> <span class="pre">...</span></code> command is used as entrypoint.</p>
<p>From this entrypoint, we trigger the different high-level tasks of the
operator end-to-end testing, eg:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">prow</span> <span class="pre">gpu-operator</span> <span class="pre">test_master_branch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">prow</span> <span class="pre">gpu-operator</span> <span class="pre">test_operatorhub</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">prow</span> <span class="pre">gpu-operator</span> <span class="pre">validate_deployment_post_upgrade</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">prow</span> <span class="pre">gpu-operator</span> <span class="pre">cleanup_cluster</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">prow</span> <span class="pre">cluster</span> <span class="pre">upgrade</span></code></p></li>
</ul>
<p>These different high-level tasks rely on the toolbox scripts to
automate the deployment of the required dependencies (eg, the NFD
operator), the deployment of the operator from its published manifest
or from its development repository and its non-regression testing.</p>
</div>
<div class="section" id="ci-dashboard">
<h2>CI Dashboard<a class="headerlink" href="#ci-dashboard" title="Permalink to this headline">¶</a></h2>
<p>The artifacts generated during the nightly CI testing are reused to
plot a “testing dashboard” that gives an overview of the last days of
testing. The generation of this page is performed by the
<a class="reference external" href="https://github.com/openshift-psap/ci-dashboard/">ci-dashboard</a>
repository.</p>
<p>Currently, only the GPU Operator results are exposed in
<a class="reference external" href="https://openshift-psap.github.io/ci-dashboard/gpu-operator_daily-matrix.html">this dashboard</a>:</p>
<a class="reference internal image-reference" href="https://openshift-psap.github.io/ci-artifacts/_static/ci-dashboard.png"><img alt="GPU Operator CI Dashboard" src="https://openshift-psap.github.io/ci-artifacts/_static/ci-dashboard.png" style="width: 100%;" /></a>
</div>
<div class="section" id="psap-operators-toolbox">
<h2>PSAP Operators Toolbox<a class="headerlink" href="#psap-operators-toolbox" title="Permalink to this headline">¶</a></h2>
<p>The PSAP Operators Toolbox is a set of tools, originally written for
CI automation, but that appeared to be useful for a broader scope. It
automates different operations on OpenShift clusters and operators
revolving around PSAP activities: entitlement, scale-up of GPU nodes,
deployment of the NFD, SRO and NVIDIA GPU Operators, but also their
configuration and troubleshooting.</p>
<p>The entrypoint for the toolbox is the <a class="reference external" href="run_toolbox.py">./run_toolbox.py</a> at the root
of this repository. Run it without any arguments to see the list of
available commands.</p>
<p>The functionalities of the toolbox commands are described in the
<a class="reference external" href="https://openshift-psap.github.io/ci-artifacts/index.html#psap-toolbox">documentation page</a>.</p>
<div class="section" id="available-toolbox-commands">
<h3>Available Toolbox Commands<a class="headerlink" href="#available-toolbox-commands" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cluster">
<h4>cluster<a class="headerlink" href="#cluster" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">cluster</span> <span class="pre">capture_environment</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py cluster capture_environment - Captures the cluster environment

SYNOPSIS
    run_toolbox.py cluster capture_environment -

DESCRIPTION
    Captures the cluster environment
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">cluster</span> <span class="pre">set_scale</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py cluster set_scale - Ensures that the cluster has exactly `scale` nodes with instance_type `instance_type`

SYNOPSIS
    run_toolbox.py cluster set_scale INSTANCE_TYPE SCALE &lt;flags&gt;

DESCRIPTION
    If the machinesets of the given instance type already have the required total number of replicas,
    their replica parameters will not be modified.
    Otherwise,
    - If there&#39;s only one machineset with the given instance type, its replicas will be set to the value of this parameter.

    - If there are other machinesets with non-zero replicas, the playbook will fail, unless the &#39;force_scale&#39; parameter is
    set to true. In that case, the number of replicas of the other machinesets will be zeroed before setting the replicas
    of the first machineset to the value of this parameter.&quot;

POSITIONAL ARGUMENTS
    INSTANCE_TYPE
        The instance type to use, for example, g4dn.xlarge
    SCALE
        The number of required nodes with given instance type

FLAGS
    --force=FORCE
        Default: False

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">cluster</span> <span class="pre">upgrade_to_image</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py cluster upgrade_to_image - Upgrades the cluster to the given image

SYNOPSIS
    run_toolbox.py cluster upgrade_to_image IMAGE

DESCRIPTION
    Upgrades the cluster to the given image

POSITIONAL ARGUMENTS
    IMAGE
        The image to upgrade the cluster to

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
</div>
<div class="section" id="entitlement">
<h4>entitlement<a class="headerlink" href="#entitlement" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">deploy</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement deploy - Deploys a cluster-wide entitlement key &amp; RHSM config file (and optionally a YUM repo certificate) with the help of MachineConfig resources.

SYNOPSIS
    run_toolbox.py entitlement deploy PEM &lt;flags&gt;

DESCRIPTION
    Deploys a cluster-wide entitlement key &amp; RHSM config file (and optionally a YUM repo certificate) with the help of MachineConfig resources.

POSITIONAL ARGUMENTS
    PEM
        Entitlement PEM file

FLAGS
    --pem_ca=PEM_CA
        Type: Optional[]
        Default: None
        YUM repo certificate

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">inspect</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement inspect - Inspects the cluster entitlement

SYNOPSIS
    run_toolbox.py entitlement inspect -

DESCRIPTION
    Inspects the cluster entitlement
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">test_cluster</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement test_cluster - Tests the cluster entitlement

SYNOPSIS
    run_toolbox.py entitlement test_cluster &lt;flags&gt;

DESCRIPTION
    Tests the cluster entitlement

FLAGS
    --no_inspect=NO_INSPECT
        Default: False
        Do not inspect on failure
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">test_in_cluster</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement test_in_cluster - Tests a given PEM entitlement key on a cluster

SYNOPSIS
    run_toolbox.py entitlement test_in_cluster PEM_KEY

DESCRIPTION
    Tests a given PEM entitlement key on a cluster

POSITIONAL ARGUMENTS
    PEM_KEY
        The PEM entitlement key to test

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">test_in_podman</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement test_in_podman - Tests a given PEM entitlement key using a podman container

SYNOPSIS
    run_toolbox.py entitlement test_in_podman PEM_KEY

DESCRIPTION
    Tests a given PEM entitlement key using a podman container

POSITIONAL ARGUMENTS
    PEM_KEY
        The PEM entitlement key to test

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">undeploy</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement undeploy - Undeploys entitlement from cluster

SYNOPSIS
    run_toolbox.py entitlement undeploy -

DESCRIPTION
    Undeploys entitlement from cluster
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">entitlement</span> <span class="pre">wait</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py entitlement wait - Waits for entitlement to be deployed

SYNOPSIS
    run_toolbox.py entitlement wait -

DESCRIPTION
    Waits for entitlement to be deployed
</pre></div>
</div>
</div>
<div class="section" id="gpu-operator">
<h4>gpu_operator<a class="headerlink" href="#gpu-operator" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">bundle_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator bundle_from_commit - Build an image of the GPU Operator from sources (&lt;git repository&gt; &lt;git reference&gt;) and push it to quay.io &lt;quay_image_image&gt;:operator_bundle_gpu-operator-&lt;gpu_operator_image_tag_uid&gt; using the &lt;quay_push_secret&gt; credentials.

SYNOPSIS
    run_toolbox.py gpu_operator bundle_from_commit GIT_REPO GIT_REF QUAY_PUSH_SECRET QUAY_IMAGE_NAME &lt;flags&gt;

DESCRIPTION
    Example parameters - https://github.com/NVIDIA/gpu-operator.git master /path/to/quay_secret.yaml quay.io/org/image_name

    See &#39;oc get imagestreamtags -n gpu-operator-ci -oname&#39; for the tag-uid to reuse.

POSITIONAL ARGUMENTS
    GIT_REPO
        Git repository URL to generate bundle of
    GIT_REF
        Git ref to bundle
    QUAY_PUSH_SECRET
        A file Kube Secret YAML file with `.dockerconfigjson` data and type kubernetes.io/dockerconfigjson
    QUAY_IMAGE_NAME

FLAGS
    --tag_uid=TAG_UID
        Type: Optional[]
        Default: None
        The image tag suffix to use.

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">capture_deployment_state</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator capture_deployment_state - Captures the GPU operator deployment state

SYNOPSIS
    run_toolbox.py gpu_operator capture_deployment_state -

DESCRIPTION
    Captures the GPU operator deployment state
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">cleanup_bundle_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator cleanup_bundle_from_commit - Cleanup resources leftover from building a bundle from a commit

SYNOPSIS
    run_toolbox.py gpu_operator cleanup_bundle_from_commit -

DESCRIPTION
    Cleanup resources leftover from building a bundle from a commit
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">deploy_cluster_policy</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator deploy_cluster_policy - Create the ClusterPolicy from the CSV

SYNOPSIS
    run_toolbox.py gpu_operator deploy_cluster_policy -

DESCRIPTION
    Create the ClusterPolicy from the CSV
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">deploy_from_bundle</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator deploy_from_bundle - Deploys the GPU Operator from a bundle

SYNOPSIS
    run_toolbox.py gpu_operator deploy_from_bundle &lt;flags&gt;

DESCRIPTION
    Deploys the GPU Operator from a bundle

FLAGS
    --bundle=BUNDLE
        Type: Optional[]
        Default: None
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">deploy_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator deploy_from_commit - Deploys the GPU operator from the given git commit

SYNOPSIS
    run_toolbox.py gpu_operator deploy_from_commit GIT_REPOSITORY GIT_REFERENCE &lt;flags&gt;

DESCRIPTION
    Deploys the GPU operator from the given git commit

POSITIONAL ARGUMENTS
    GIT_REPOSITORY
        The git repository to deploy from, e.g. https://github.com/NVIDIA/gpu-operator.git
    GIT_REFERENCE
        The git ref to deploy from, e.g. master

FLAGS
    --tag_uid=TAG_UID
        Type: Optional[]
        Default: None
        The GPU operator image tag UID. See &#39;oc get imagestreamtags -n gpu-operator-ci -oname&#39; for the tag-uid to reuse

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">deploy_from_operatorhub</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator deploy_from_operatorhub - Deploys the GPU operator from OperatorHub

SYNOPSIS
    run_toolbox.py gpu_operator deploy_from_operatorhub &lt;flags&gt;

DESCRIPTION
    Deploys the GPU operator from OperatorHub

FLAGS
    --version=VERSION
        Type: Optional[]
        Default: None
        The version to deploy. If unspecified, deploys the latest version available in OperatorHub. Run the toolbox gpu_operator list_version_from_operator_hub subcommand to see the available versions.
    --channel=CHANNEL
        Type: Optional[]
        Default: None
        Optional channel to deploy from.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">run_gpu_burn</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator run_gpu_burn - Runs the GPU burn on the cluster

SYNOPSIS
    run_toolbox.py gpu_operator run_gpu_burn &lt;flags&gt;

DESCRIPTION
    Runs the GPU burn on the cluster

FLAGS
    --runtime=RUNTIME
        Type: Optional[]
        Default: None
        How long to run the GPU for, in seconds
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">set_repo_config</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator set_repo_config - Sets the GPU-operator driver yum repo configuration file

SYNOPSIS
    run_toolbox.py gpu_operator set_repo_config REPO_FILE &lt;flags&gt;

DESCRIPTION
    Sets the GPU-operator driver yum repo configuration file

POSITIONAL ARGUMENTS
    REPO_FILE
        Absolute path to the repo file

FLAGS
    --dest_dir=DEST_DIR
        Type: Optional[]
        Default: None
        The destination dir in the pod to place the repo in

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">undeploy_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator undeploy_from_commit - Undeploys a GPU-operator that was deployed from a commit

SYNOPSIS
    run_toolbox.py gpu_operator undeploy_from_commit -

DESCRIPTION
    Undeploys a GPU-operator that was deployed from a commit
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">undeploy_from_operatorhub</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator undeploy_from_operatorhub - Undeploys a GPU-operator that was deployed from OperatorHub

SYNOPSIS
    run_toolbox.py gpu_operator undeploy_from_operatorhub -

DESCRIPTION
    Undeploys a GPU-operator that was deployed from OperatorHub
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">gpu_operator</span> <span class="pre">wait_deployment</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py gpu_operator wait_deployment - Waits for the GPU operator to deploy

SYNOPSIS
    run_toolbox.py gpu_operator wait_deployment -

DESCRIPTION
    Waits for the GPU operator to deploy
</pre></div>
</div>
</div>
<div class="section" id="local-ci">
<h4>local_ci<a class="headerlink" href="#local-ci" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">local_ci</span> <span class="pre">cleanup</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py local_ci cleanup - Clean the local CI artifacts

SYNOPSIS
    run_toolbox.py local_ci cleanup -

DESCRIPTION
    Clean the local CI artifacts
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">local_ci</span> <span class="pre">deploy</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py local_ci deploy - Runs a given CI command

SYNOPSIS
    run_toolbox.py local_ci deploy CI_COMMAND GIT_REPOSITORY GIT_REFERENCE &lt;flags&gt;

DESCRIPTION
    Runs a given CI command

POSITIONAL ARGUMENTS
    CI_COMMAND
        The CI command to run, for example &quot;run gpu-ci&quot;
    GIT_REPOSITORY
        The git repository to run the command from, e.g. https://github.com/openshift-psap/ci-artifacts.git
    GIT_REFERENCE
        The git ref to run the command from, e.g. master

FLAGS
    --tag_uid=TAG_UID
        Type: Optional[]
        Default: None
        The local CI image tag UID

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
</div>
<div class="section" id="nfd">
<h4>nfd<a class="headerlink" href="#nfd" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd</span> <span class="pre">has_gpu_nodes</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd has_gpu_nodes - Checks if the cluster has GPU nodes

SYNOPSIS
    run_toolbox.py nfd has_gpu_nodes -

DESCRIPTION
    Checks if the cluster has GPU nodes
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd</span> <span class="pre">has_labels</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd has_labels - Checks if the cluster has NFD labels

SYNOPSIS
    run_toolbox.py nfd has_labels -

DESCRIPTION
    Checks if the cluster has NFD labels
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd</span> <span class="pre">wait_gpu_nodes</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd wait_gpu_nodes - Wait until nfd find GPU nodes

SYNOPSIS
    run_toolbox.py nfd wait_gpu_nodes -

DESCRIPTION
    Wait until nfd find GPU nodes
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd</span> <span class="pre">wait_labels</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd wait_labels - Wait until nfd labels the nodes

SYNOPSIS
    run_toolbox.py nfd wait_labels -

DESCRIPTION
    Wait until nfd labels the nodes
</pre></div>
</div>
</div>
<div class="section" id="nfd-operator">
<h4>nfd_operator<a class="headerlink" href="#nfd-operator" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd_operator</span> <span class="pre">deploy_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd_operator deploy_from_commit - Deploys the NFD operator from the given git commit

SYNOPSIS
    run_toolbox.py nfd_operator deploy_from_commit GIT_REPO GIT_REF &lt;flags&gt;

DESCRIPTION
    Deploys the NFD operator from the given git commit

POSITIONAL ARGUMENTS
    GIT_REPO
    GIT_REF
        The git ref to deploy from, e.g. master

FLAGS
    --image_tag=IMAGE_TAG
        Type: Optional[]
        Default: None
        The NFD operator image tag UID.

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd_operator</span> <span class="pre">deploy_from_operatorhub</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd_operator deploy_from_operatorhub - Deploys the GPU Operator from OperatorHub

SYNOPSIS
    run_toolbox.py nfd_operator deploy_from_operatorhub &lt;flags&gt;

DESCRIPTION
    Deploys the GPU Operator from OperatorHub

FLAGS
    --channel=CHANNEL
        Type: Optional[]
        Default: None
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">nfd_operator</span> <span class="pre">undeploy_from_operatorhub</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py nfd_operator undeploy_from_operatorhub - Undeploys an NFD-operator that was deployed from OperatorHub

SYNOPSIS
    run_toolbox.py nfd_operator undeploy_from_operatorhub -

DESCRIPTION
    Undeploys an NFD-operator that was deployed from OperatorHub
</pre></div>
</div>
</div>
<div class="section" id="repo">
<h4>repo<a class="headerlink" href="#repo" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">repo</span> <span class="pre">validate_role_files</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py repo validate_role_files - Ensures that all the Ansible variables defining a filepath (`roles/`) do point to an existing file.

SYNOPSIS
    run_toolbox.py repo validate_role_files -

DESCRIPTION
    Ensures that all the Ansible variables defining a filepath (`roles/`) do point to an existing file.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">repo</span> <span class="pre">validate_role_vars_used</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py repo validate_role_vars_used - Ensure that all the Ansible variables defined are actually used in their role (with an exception for symlinks)

SYNOPSIS
    run_toolbox.py repo validate_role_vars_used -

DESCRIPTION
    Ensure that all the Ansible variables defined are actually used in their role (with an exception for symlinks)
</pre></div>
</div>
</div>
<div class="section" id="sro">
<h4>sro<a class="headerlink" href="#sro" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">sro</span> <span class="pre">capture_deployment_state</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py sro capture_deployment_state

SYNOPSIS
    run_toolbox.py sro capture_deployment_state -
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">sro</span> <span class="pre">deploy_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py sro deploy_from_commit - Deploys the SRO operator from the given git commit

SYNOPSIS
    run_toolbox.py sro deploy_from_commit GIT_REPO GIT_REF &lt;flags&gt;

DESCRIPTION
    Deploys the SRO operator from the given git commit

POSITIONAL ARGUMENTS
    GIT_REPO
        The git repository to deploy from, e.g. https://github.com/openshift-psap/special-resource-operator.git
    GIT_REF
        The git ref to deploy from, e.g. master

FLAGS
    --image_tag=IMAGE_TAG
        Type: Optional[]
        Default: None
        The SRO operator image tag UID.

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">sro</span> <span class="pre">run_e2e_test</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py sro run_e2e_test - Runs e2e test on the given SRO repo and ref

SYNOPSIS
    run_toolbox.py sro run_e2e_test GIT_REPO GIT_REF

DESCRIPTION
    Runs e2e test on the given SRO repo and ref

POSITIONAL ARGUMENTS
    GIT_REPO
        The git repository to deploy from, e.g. https://github.com/openshift-psap/special-resource-operator.git
    GIT_REF
        The git ref to deploy from, e.g. master

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">./run_toolbox.py</span> <span class="pre">sro</span> <span class="pre">undeploy_from_commit</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NAME
    run_toolbox.py sro undeploy_from_commit - Undeploys an SRO-operator that was deployed from commit

SYNOPSIS
    run_toolbox.py sro undeploy_from_commit GIT_REPO GIT_REF

DESCRIPTION
    Undeploys an SRO-operator that was deployed from commit

POSITIONAL ARGUMENTS
    GIT_REPO
        The git repository to undeploy, e.g. https://github.com/openshift-psap/special-resource-operator.git
    GIT_REF
        The git ref to undeploy, e.g. master

NOTES
    You can also use flags syntax for POSITIONAL ARGUMENTS
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contrib.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Red Hat PSAP CI-Artifacts toolbox" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Red Hat PSAP team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>